> **學習成果與目標**
>・能夠解釋 TDD 的基礎概念、使用情境以及優缺點

<hr style="border-top: 2px solid #eee">

### 什麼是 TDD？

在之前練習「波特買書」的案例時，我們提到了名為「測試驅動開發」(Test-Driven Development，簡稱 TDD) ，簡單來說就是先寫測試程式，然後才實作功能，因而形成了 Red-Green-Refactory 的循環：


<div style="width:100%"> <img style="max-width:700px;width:100%;" src="https://assets-lighthouse.s3.amazonaws.com/uploads/image/file/2479/red-green-refactor.png"></div>

<br>

1. Red - 先寫測試程式，此時因為還沒有實作功能，所以這個測試會失敗
2. Green - 快速實作出功能，讓上述測試通過
3. Refactory - 重構程式碼，去除多餘的代碼，提高程式碼品質，同時維持測試通過

一般在談「撰寫測試」時，不一定真的要「先寫測試、再寫功能」，TDD 是一種開發技巧，也可以說是一種精神。

| 一般常見的軟體開發流程| 套用 TDD 的軟體開發流程|
|-----|-------------------|
| 逐項功能開始撰寫代碼<br>替每一項功能加上測試 | 寫 A 功能的測試<br> 撰寫代碼直到通過 A 功能的測試<br>寫 B 功能的測試<br>撰寫代碼直到通過 B 功能的測試<br>以此類推到功能開發結束 |

<br>

### TDD 的緣起

歷史上最早出現類似 TDD 的開發方式，發生在 1960 年代早期，那是個電腦主機比一間套房還要大的年代，像今天這㮔人性化的圖形介面編輯器（如 Sublime 或 Vim）還沒有問世，工程師無法像今天一樣方便地編寫程式碼，而是需要先把程式碼寫在打孔卡上，讓電腦讀取程式、執行，最後才能輸出執行結果。

在這個情況下，一台電腦能夠同時讀取的打孔卡數量有限，再加上電腦執行程式以後，還要驗證輸出的結果是否正確，整個「測試」的過程必須花費不少時間，導致工程師每一波提交程式的週期變得很長。


<div style="width:100%"> <img style="max-width:700px;width:100%;" src="https://assets-lighthouse.s3.amazonaws.com/uploads/image/file/2478/0101.jpg"></div>


<span style="font-style: italic;color: #999">_IBM 的打孔卡。Source: Marcin Wichary / Computer History Museum / Wikimedia_</span>

<br>

TDD 就是在這樣的背景下誕生，目的是透過最小化 debug 的時間來降低提交程式的週期。

TDD，也就是所謂的「測試驅動開發」，作法是這樣：針對這一波提交的代碼，事先撰寫執行後的「預期結果」，電腦運算結束之後，直接把電腦輸出的結果和「預期結果」做比較，就能立刻知道程式碼是否出了問題。
這樣的作法除了能大幅度減少 debug 時間，「在一開始就計算出預期結果」也使得工程師更能夠在代碼提交之前意識到自己的錯誤，意味著整體專案開發的效率提升。

到了 2002 年，TDD 再次展露頭角。Kent Beck 和他的夥伴維護一套名為 JUnit 的 Java 測試框架。受到大家好評，之後陸續有開發者把類似 JUnit 的測試方式導入到不同的領域，逐漸形成現在 TDD 的生態圈。

透過 TDD 開發有不少的優點，像是：

 * 減少軟體的錯誤
 * 軟體架構更有組織化
 * 軟體架構更容易被測試
 * 長期來看帶來更小的維護成本

缺點的部分：

 * 產品複雜度增加
 * 一開始的學習的曲線比較陡峭
 * 短期可能看不到效果

無論是否採用 TDD 的方式來開發軟體，做為升級寫程式的功能，TDD 都是很好的練習法門，在採用 TDD 開發的過程中，會需要對軟體的設計面有更深入的思考。

在正式開始進入到 Rails 專案裡寫 code 之前，我們會先使用一個「冷氣遙控器」的模擬程式，來讓你體驗到用 TDD 開發程式的感覺。

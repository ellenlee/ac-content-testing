## 什麼是測試

軟體測試（以下簡稱測試／Software Testing），是指軟體產品在進入市場前，對於產品的程式碼、規格和需求進行評估，確保軟體產品的品質達標。

### 測試不是什麼？【龍哥的話】

很多人以為，所謂的測試，就是請個工讀生、打開瀏覽器、拿著滑鼠點一點就叫測試了（這也是測試沒錯，但並不是我們所要介紹的測試）。也有人認為，測試就是就在幫程式碼除錯（Debug），所以有寫測試就不會有 Bug 了。當然也有人覺得寫測試很浪費時間所以反對或不想寫測試。

事實上，很多隱藏的細節並不是請工讀生或是隨便用滑鼠點一點就測得到的。想想看，每次每位開發者所做的任何小修改，如果不完整測試一輪，很難知道哪邊會出問題；但整個流程測試一次，又實在是相當浪費時間。生命就該浪費在美好的事物上，不是嗎 :）

### 最常見的三種測試

測試可以從不同層面切入，這裡提供三種最常見的測試，以測試內容的大小排序：
- 單元測試（Unit Test）
- 整合測試（Integration Test）
- 驗收測試（Acceptance Test）

單元測試，會對個別的類別和方法測試結果如預期，通常會由開發者自行負責測試，因為只有你自己清楚每個類別和方法的內部結構是怎麼設計的。

整合測試會測試多個元件之間的互動正確；而驗收測試，則常由專門的測試工程師來負責，測試者不需要知道程式碼內部是怎麼實作的，只需知道什麼是系統應該做的事即可。

注意：測試不止這三種，但最常見的這三種。

### 不同測試的觀點

單元測試的目的意在確認程式的執行結果是否正確，測試個別的類別和函式正確。

整合測試是測試是在確認通過單元測試的功能組合在一起的執行結果是否正確，測試多個類別之間正確

最後，驗收測試是從使用者的角度來考量該軟體產品是否有滿足需求，從用戶觀點測試整個軟體。

![image](images/0101-1.png)

有上到下的三種測試，基本可以分成兩種測試類別：
- 白箱測試：
- 黑箱測試：

不同的測試，測試的人員也不同：
- 開發者：
- 測試人員：

### 測試的目的與好處

正確(Correctness)：確認你寫的程式的正確，結果如你所預期。一旦寫好測試程式，很容易就可以檢查程式有沒有寫對，大大減少自行除錯的時間。
穩定(Stability)：之後新加功能或改寫重構時，不會影響搞爛之前寫好的功能。這又叫作「回歸測試」，你不需要手動再去測其他部分的測試，你可以用之前寫好的測試程式。如果你的軟體不是那種跑一次就丟掉的程式，而是需要長期維護的產品，那就一定有回歸測試的需求。
設計(Design)：可以採用TDD開發方式，先寫測試再實作。這是寫測試的最佳時機點，實作的目的就是為了通過測試。從使用API的呼叫者的角度去看待程式，可以更關注在介面而設計出更好用的API。
文件(Documentation)：測試就是一種程式規格，程式的規格就是滿足測試條件。這也是為什麼RSpec稱為Spec的原因。不知道API怎麼呼叫使用時，可以透過讀測試程式知道怎麼使用。
其中光是第一個好處，就值得你學習如何寫測試，來加速你的開發，怎麼說呢?回想你平常是怎麼確認你寫的程式正確的呢? 是不是在命令列中實際執行看看，或是打開瀏覽器看看結果，每次修改，就重新手動重新整理看看。這些步驟其實可以透過用自動化測試取代，大大節省手工測試的時間。這其實是一種投資，如果是簡單的程式，也許你手動執行一次就寫對了，但是如果是複雜的程式，往往第一次不會寫對，你會浪費很多時間在檢查到底你寫的程式的正確性，而寫測試就可以大大的節省這些時間。更不用說你明天，下個禮拜或下個月需要再確認其他程式有沒有副作用影響的時候，你有一組測試程式可以大大節省手動檢查的時間。

### 手動測試與自動化測試

我們在寫完程式後，基本上都會進行測試，執行看看結果是否正確，或打開瀏覽器看看結果對不對

然而，手動測試很沒有效率，如果是一些較複雜的程式，有多個判斷方式，你很可能會漏掉要檢查幾種可能性，甚至是你在寫程式時的「例外情況」。

下為一個年齡判斷程式，小於多少歲則不符合資格：
```ruby
def correct_year_month(year, month)
 if month > 12
   if month % 12 == 0
     year += (month - 12) / 12
     month = 12
   else
     year += month / 12
     month = month % 12
   end
 end
 return [year, month]
end
```

你會發現，要手動測試這個程式，至少需要測試重複輸入幾次不同的資料。

因此，就有了自動化測試，讓程式去測試程式。

自動化測試的好處是：
- Instant Feedback，寫測試的時間小於你的 debug 時間
- 回歸測試與重構
- 協助你設計 API，讓人理解怎麼使用你的測試
- 可當成一種程式文件來理解程式

下個單元，我們會來了解從測試中演化出的開發方式 - 測試驅動開發。
